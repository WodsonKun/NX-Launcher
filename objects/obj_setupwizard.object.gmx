<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Variables
step = 0;
surf = -1;
init_text = "";
profile_icon = spr_def_profilepicture;

//Create a variable to access "User", Fenix Launcher and both "Local" and "Roaming" AppData folders
global.userdir = environment_get_variable("USERPROFILE");
global.launcherdir = global.userdir + "\NX_Launcher_Plus"
global.local_appdatadir = global.userdir + "\AppData\Local"
global.roaming_appdatadir = global.userdir + "\AppData\Roaming"
global.appdata_launcherdir = global.local_appdatadir + "\NX_Launcher_"
global.launcher_coredir = working_directory + "\core"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handles actions
//Take the user input from the keyboard
init_text = keyboard_string;

//Setup the user profile
if (room == rm_setupwizard_0)
{
    if (mouse_check_button_released(mb_left))
    {
        if (point_in_rectangle(mouse_x, mouse_y, 192, 192, 192+256, 192+256))
        {
            ///Change profile picture
            var get_profile_icon = get_open_filename_ext("Profile Picture (64x64 / 128x128 / 256x256)|*.png;*.jpg;*.jpeg", "", game_save_id + "profile_pics", "Choose a profile picture");
            if (get_profile_icon != "")
            {
                sprite_delete(profile_icon);
                profile_icon = sprite_add(get_profile_icon,0,0,1,0,0);
                file_delete_fmns(game_save_id + '_profile.png');
                file_copy_fmns(get_profile_icon, game_save_id + '_profile.png');
            }
            else
            {
                get_profile_picture = spr_def_profilepicture;
            }
        }
        if (point_in_rectangle(mouse_x, mouse_y, 1184, 656, 1184+64, 656+64))
        {
            surface_free(surf);
            if (init_text != "")
            {
                ini_open(game_save_id + '_data.ini');
                ini_write_string("User Data", "profile_name", init_text);
                ini_write_string("User Data", "profile_icon", profile_icon);
                ini_close();
            }
            else 
            {
                ini_open(game_save_id + '_data.ini');
                ini_write_string("User Data", "profile_name", "Guest User");
                ini_write_string("User Data", "profile_icon", profile_icon);
                ini_close();
            }
            room_goto(rm_setupwizard_1);
        }
    }
}

//Setup online updates
if (room == rm_setupwizard_1)
{
    if (mouse_check_button_released(mb_left))
    {
        if (point_in_rectangle(mouse_x, mouse_y, 745, 350, 745 + 320, 350 + 48))
        {
            ini_open(game_save_id + '_data.ini');
            ini_write_real("Launcher Data", "update_check", "1");
            ini_close();
            if (file_exists_fmns(global.local_appdatadir + "\Discord\Update.exe"))
            {
                room_goto(rm_setupwizard_2);
            }
            else
            {
                ini_open(game_save_id + '_data.ini');
                ini_write_real("Settings", "discord", "0");
                ini_close();
                room_goto(rm_setupwizard_3);
            }
        }
    
        //Nope, thanks.
        if (point_in_rectangle(mouse_x, mouse_y, 745, 410, 745 + 320, 410 + 48))
        {
            ini_open(game_save_id + '_data.ini');
            ini_write_real("Launcher Data", "update_check", "0");
            ini_close();
            if (file_exists_fmns(global.local_appdatadir + "\Discord\Update.exe"))
            {
                room_goto(rm_setupwizard_2);
            }
            else
            {
                ini_open(game_save_id + '_data.ini');
                ini_write_real("Settings", "discord", "0");
                ini_close();
                room_goto(rm_setupwizard_3);
            }
        }
    }
}

//Setup Discord's Rich Presence status
if (room == rm_setupwizard_2)
{
    if (mouse_check_button_released(mb_left))
    {
        //Yup, sure!
        if (point_in_rectangle(mouse_x, mouse_y, 745, 350, 745 + 320, 350 + 48))
        {
            ini_open(game_save_id + '_data.ini');
            ini_write_real("Settings", "discord", "1");
            ini_close();
            room_goto(rm_setupwizard_3);
        }
    
        //Nope, thanks.
        if (point_in_rectangle(mouse_x, mouse_y, 745, 410, 745 + 320, 410 + 48))
        {
            ini_open(game_save_id + '_data.ini');
            ini_write_real("Settings", "discord", "0");
            ini_close();
            room_goto(rm_setupwizard_3);
        }
    }
}

//Finish the Setup Wizard and go to the HOME Menu
if (room == rm_setupwizard_3)
{
    if (mouse_check_button_released(mb_left))
    {
        if (point_in_rectangle(mouse_x, mouse_y, 512, 656, 512 + 48, 656 + 48))
        {
            //Write default values
            ini_open(game_save_id + '_data.ini');
            ini_write_real("Settings", "theme", "0"); //Theme
            ini_write_real("Settings", "ui_buttons", "1"); //UI Buttons: Show
            ini_write_real("Settings", "fullscreen", "0"); //Fullscreen
            ini_write_real("Settings", "lang", "en"); //Language (Default: English)
            ini_write_real("Settings", "thumb_db", "0"); //ThumbDB
            ini_write_real("Settings", "profilepic_db", "0"); //Profile Picture DB
            ini_write_real("Settings", "wallpaper_db", "0"); //WallpaperDB
            ini_write_real("Launcher Data", "position", "0"); //Game list position
            ini_close();
            
            //Then, start NX Launcher+
            room_goto(rm_homemenu);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Display render
display_render();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw interactible and animated stuff
//Draw the profile picture on Step 1
if (room = rm_setupwizard_0)
{
    if !(surface_exists(surf))
    {
        surf = surface_create(256, 256);
    }
    surface_set_target(surf)
    draw_sprite(spr_shp_profileimage_big, 0, sprite_xoffset, sprite_yoffset)
    if (sprite_exists(profile_icon))
    {
        draw_set_color_write_enable(1, 1, 1, 0)
        draw_sprite_stretched(profile_icon, 0, 0, 0, 256, 256)
        draw_set_color_write_enable(1, 1, 1, 1)
    }
    surface_reset_target();
    draw_surface(surf, x - sprite_xoffset, y - sprite_yoffset)
    
    //Draw highlight
    if (point_in_rectangle(mouse_x, mouse_y, 192, 192, 192+256, 192+256))
    {
        draw_sprite_ext(spr_shp_profileimage_outline_big, 0, 192 - 6, 192 - 6, 1, 1, 0, merge_colour(make_colour_rgb(26, 223, 179), c_aqua, 0.5), 1);
        draw_set_font(fnt_nsw_udsg_12);
        draw_text_colour(192 + 35, 192+256+8, "Change profile picture", make_colour_rgb(26, 223, 179), c_aqua, make_colour_rgb(26, 223, 179), c_aqua, 1);
    }
    else
    {
        draw_set_colour(make_colour_rgb(35, 35, 35));
        draw_text_shadow(192 + 35, 192 + 256 + 8, "Change profile picture", 0.2, c_black, make_colour_rgb(35, 35, 35))
    }
    
    //Draw a separator line
    draw_line(576, 144, 576, 544)
    
    //Draw hint text
    draw_set_colour(make_colour_rgb(35, 35, 35));
    draw_set_font(fnt_nsw_ntlg_16)
    draw_text(736, 112 + 200, "Please, input your username here:")
    
    //Draw the text box
    draw_sprite_ext(spr_def_textbox, 0, 736, 145 + 200, 1, 1, 0, c_white, 1);
    draw_set_colour(make_colour_rgb(35, 35, 35));
    draw_set_font(fnt_nsw_udsg_12)
    draw_text(742, 150 + 200, init_text);
    
    //Draw the button to change through steps
    draw_sprite_ext(spr_nsw_indicator_icons, 7, 1184, 656, 0.5, 0.5, 0, make_colour_rgb(35, 35, 35), 1);
}

//Draw internet icon on Step 2
if (room == rm_setupwizard_1)
{
    draw_sprite_ext(spr_icn_internet, 0, 192 + 32, 192, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    
    //Draw hint text
    draw_set_colour(make_colour_rgb(35, 35, 35));
    draw_set_font(fnt_nsw_ntlg_16)
    draw_text(736, 180, "Do you wanna enable online updates?")
    
    //Draw options
    //Yup, sure!
    draw_text(745, 350, "Yup, sure!")
    if (point_in_rectangle(mouse_x, mouse_y, 745, 350, 745 + 320, 350 + 48))
    {
        draw_sprite_ext(spr_setupwizard_button_overlay, 0, 745 - 12, 350 - 8, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    }
    
    //Nope, thanks.
    draw_text(745, 410, "Nope, thanks!")
    if (point_in_rectangle(mouse_x, mouse_y, 745, 410, 745 + 320, 410 + 48))
    {
        draw_sprite_ext(spr_setupwizard_button_overlay, 0, 745 - 12, 410 - 8, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    }
}

//Draw Discord's icon on Step 3
if (room = rm_setupwizard_2)
{
    draw_sprite_ext(spr_icn_discord, 0, 192 + 32, 192, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    
    //Draw hint text
    draw_set_colour(make_colour_rgb(35, 35, 35));
    draw_set_font(fnt_nsw_ntlg_16)
    draw_text(736, 180, "We detected that you have Discord installed#on your computer.##Do you wanna enable Rich Presence?")
    
    //Draw options
    //Yup, sure!
    draw_text(745, 350, "Yup, sure!")
    if (point_in_rectangle(mouse_x, mouse_y, 745, 350, 745 + 320, 350 + 48))
    {
        draw_sprite_ext(spr_setupwizard_button_overlay, 0, 745 - 12, 350 - 8, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    }
    
    //Nope, thanks.
    draw_text(745, 410, "Nope, thanks!")
    if (point_in_rectangle(mouse_x, mouse_y, 745, 410, 745 + 320, 410 + 48))
    {
        draw_sprite_ext(spr_setupwizard_button_overlay, 0, 745 - 12, 410 - 8, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    }
}

//Finish the setup wizard
if (room == rm_setupwizard_3)
{
    //Set the color as black and the font as the bold one
    draw_set_colour(make_colour_rgb(35, 35, 35));
    draw_set_font(fnt_nsw_ntlg_16);
    
    //Draw the happy icon
    draw_sprite_ext(spr_nsw_system_icons, 4, 512, 144, 1, 1, 0, make_colour_rgb(35, 35, 35), 1);
    
    //Draw the finish text
    draw_text(256, 256, "Congrats! You've just finished NX Launcher+'s Setup Wizard!#Feel free to check our info in the About screen on Settings.#I hope you enjoy and make good use of this launcher.##Sincerely,#WodsonKun")
    
    //Draw the button to change through steps
    draw_sprite_ext(spr_nsw_indicator_icons, 7, 512, 656, 0.5, 0.5, 0, make_colour_rgb(35, 35, 35), 1);
}

//Draw cursor
window_set_cursor(cr_none);
draw_sprite_ext(spr_fus_cursor, 0, mouse_x, mouse_y, 1, 1, 0, make_colour_rgb(26, 223, 179), 1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw static stuff
//Draw the background (white, as it is the default theme)
draw_background_tiled_ext(bck_lighttheme, 0, 0, 1, 1, c_white, 1);

//Draw the Setup Wizard icon
draw_sprite_ext(spr_nsw_system_icons, 4, 16, 16, 0.5, 0.5, 0, make_colour_rgb(35, 35, 35), 1);

//Draw "Setup Wizard" and steps
draw_set_colour(make_colour_rgb(35, 35, 35))
draw_set_font(fnt_nsw_ntlg_24);
draw_text(72, 16, "Setup Wizard");
draw_set_font(fnt_nsw_udsg_12);
switch (room)
{
    case rm_setupwizard_0:
    draw_text(74, 54, "Step 1: Create a profile");
    break;
    
    case rm_setupwizard_1:
    draw_text(74, 54, "Step 2: Online updates");
    break;
    
    case rm_setupwizard_2:
    draw_text(74, 54, "Step 3: Discord's Rich Presence status");
    break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
